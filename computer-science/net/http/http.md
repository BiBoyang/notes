Date: 2019-02-06

## HTTP3

http2的问题

1. 只使用一个 TCP 链接，导致线头阻塞，如果丢包的话，会导致所有的连接都被阻塞住。http1 则是建立多个连接。
2. 所有的防火墙都只认 TCP 或者 UDP，所以没有办法使用新的协议。
3. TCP 协议僵化，互联网中间的好多设备都比较老了，协议的新选项他们都不认，直接就把包丢了。比如说 fast open

- QUIC 使用 TLS 1.3
- QUIC 协议基于 UDP 但实现了 TCP 的一些拥塞控制等功能，也是可靠连接
- QUIC 有多个逻辑数据流
- QUIC 可以 0RTT 或者 1RTT 建立连接
- QUIC 可以实现连接漫游，利用 Connection ID
- QUIC 通过旋转比特位实现观察。在每一次往返时，连接双方都翻转这一比特的值
- QUIC 目前在 userspace 实现，协议的演进更为容易

可以通过 `Alt-Svc: h3=":50781"` 协商升级到 QUIC 协议。
